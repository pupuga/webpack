(()=>{"use strict";const t=JSON.parse('{"selector":"exit-popup","cookieViewName":"exit_popup_view","cookieEventName":"exit_popup_event"}');function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.slug="digital-countdown-timer",this.setTemplateMinutes(),this.setTemplateMinute(),this.setTemplateSeconds(),this.setTemplateSecond(),this.setTemplate()}var i,n;return i=t,(n=[{key:"getTemplate",value:function(){return this.template}},{key:"setTemplate",value:function(){this.template='\n            <div class="'.concat(this.slug,'">\n                ').concat(this.templateMinutes,"\n                ").concat(this.templateMinute,'\n                <div class="').concat(this.slug,'__delimiter"></div>\n                ').concat(this.templateSeconds,"\n                ").concat(this.templateSecond,"\n            </div>")}},{key:"setTemplateMinutes",value:function(){this.templateMinutes=this.setTemplateDigitalBlock(5,0,"minutes")}},{key:"setTemplateMinute",value:function(){this.templateMinute=this.setTemplateDigitalBlock(9,0,"minute")}},{key:"setTemplateSeconds",value:function(){this.templateSeconds=this.setTemplateDigitalBlock(5,0,"seconds")}},{key:"setTemplateSecond",value:function(){this.templateSecond=this.setTemplateDigitalBlock(9,0,"second")}},{key:"setTemplateDigitalBlock",value:function(t,e,i){for(var n="",s=t;s>=e;s--)n+=this.setTemplateDigit(s);return'<div class="'.concat(this.slug,"__flip ").concat(this.slug,"__flip--").concat(i,'">').concat(n,"</div>")}},{key:"setTemplateDigit",value:function(t){return'\n            <div class="'.concat(this.slug,'__digit">\n                <div class="').concat(this.slug,'__animation">\n                    <div class="').concat(this.slug,'__up">\n                        <div class="').concat(this.slug,"__shadow ").concat(this.slug,'__shadow--up"></div>\n                        <div class="').concat(this.slug,"__inn ").concat(this.slug,'__inn--up">').concat(t,'</div>\n                    </div>\n                    <div class="').concat(this.slug,'__down">\n                        <div class="').concat(this.slug,"__shadow ").concat(this.slug,'__shadow--down"></div>\n                        <div class="').concat(this.slug,"__inn  ").concat(this.slug,'__inn--down">').concat(t,"</div>\n                    </div>\n                </div>\n            </div>")}}])&&e(i.prototype,n),t}();function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.slug="analog-countdown-timer",this.items=20,this.setTemplateItems(),this.setTemplate()}var e,i;return e=t,(i=[{key:"getTemplate",value:function(){return this.template}},{key:"setTemplateItems",value:function(){this.templateItems="";for(var t=1;t<=this.items;t++)this.templateItems+='<div class="'.concat(this.slug,'__item"></div>')}},{key:"setTemplate",value:function(){this.template='\n            <div class="'.concat(this.slug,'">\n                <div class="').concat(this.slug,'__list">\n                   ').concat(this.templateItems,"\n                </div>\n            </div>")}}])&&n(e.prototype,i),t}();function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e,this.config=n,this.browserParams=o,this.templateDigitalClock=(new i).getTemplate(),this.templateAnalogClock=(new s).getTemplate(),this.setStyle(),this.setTemplateTimer(),this.setTemplateCode(),this.setTemplate(),this.insert()}var e,n;return e=t,(n=[{key:"getTemplateTimer",value:function(){return this.timer}},{key:"getTemplateCode",value:function(){return this.code}},{key:"setStyle",value:function(){this.style="<style>.".concat(this.config.selector," {\n                    --border-radius: ").concat(this.data.style.borderRadius||11,"px;\n                    --background-color: ").concat(this.data.style.backgroundColor||"#fff","; \n                    --font-family: ").concat(this.data.style.getFontFamily?window.getComputedStyle(document.body,null).getPropertyValue("font-family"):"Helvetica,Arial,sans-serif",";\n                    --timer-title-font-color: ").concat(this.data.style.timerTitleFontColor||"#000",";\n                    --timer-font-color: ").concat(this.data.style.timerFontColor||"#cd171b",";\n                    --timer-digit-color: ").concat(this.data.style.timerDigitColor||"#fff",";\n                    --timer-digit-background-color: ").concat(this.data.style.timerDigitBackgroundColor||"#333",";\n                    --timer-analog-point-color: ").concat(this.data.style.timerAnalogPointColor||"#969696",";\n                    --code-title-font-color: ").concat(this.data.style.codeTitleFontColor||"#000",";\n                    --code-font-color: ").concat(this.data.style.codeFontColor||"#000",";\n                    --code-code-font-color: ").concat(this.data.style.codeCodeFontColor||"#cd171b",";\n                    --help-font-color: ").concat(this.data.style.helpFontColor||"#979797",";\n                    --close-button-color: ").concat(this.data.style.closeButtonColor||"#979797",";\n                    --minimize-button-color: ").concat(this.data.style.minimizeButtonColor||"#fff",";\n                    --minimize-button-background-color: ").concat(this.data.style.minimizeButtonBackgroundColor||"#cd171b",";\n                }</style>")}},{key:"setTemplateTimer",value:function(){this.timer='<div class="'.concat(this.config.selector,"__main ").concat(this.config.selector,'__main--timer">\n            <div class="').concat(this.config.selector,"__title ").concat(this.config.selector,'__title--timer">').concat(this.data.timerTitle,'</div>\n            <div class="').concat(this.config.selector,"__description ").concat(this.config.selector,'__description--attention">').concat(this.data.timerDescription,'</div>\n            <div class="').concat(this.config.selector,'__digital-clock">').concat(this.templateDigitalClock,'</div>\n            <div class="').concat(this.config.selector,'__round-clock">').concat(this.templateAnalogClock,'</div>\n            <div class="').concat(this.config.selector,"__image ").concat(this.config.selector,'__image--timer"><img src="data:image/').concat(this.data.timerImageExt,";base64,").concat(this.data.timerImage,'"></div>\n        </div>')}},{key:"setTemplateCode",value:function(){this.code='<div class="'.concat(this.config.selector,"__main ").concat(this.config.selector,'__main--code">\n            <div class="').concat(this.config.selector,"__title ").concat(this.config.selector,'__title--code">').concat(this.data.codeTitle,'</div>\n            <div class="').concat(this.config.selector,'__description">').concat(this.data.codeDescription,'</div>\n            <div class="').concat(this.config.selector,'__code">').concat(this.data.code,'</div>\n            <div class="').concat(this.config.selector,"__image ").concat(this.config.selector,'__image--code"><img src="data:image/').concat(this.data.codeImageExt,";base64,").concat(this.data.codeImage,'"></div>\n        </div>')}},{key:"setTemplate",value:function(){this.template='<div class="'.concat(this.config.selector," ").concat(this.config.selector,"--").concat(this.browserParams.mac?"mac":"not-mac",'">\n            <div class="').concat(this.config.selector,'__window">\n                <div class="').concat(this.config.selector,'__header">\n                    <div class="').concat(this.config.selector,'__helper-text">').concat(this.data.headerText,'</div>\n                    <div class="').concat(this.config.selector,"__close ").concat(this.config.selector,"__close--").concat(this.browserParams.mac?"mac":"not-mac",'"></div>\n                </div>\n                <div class="').concat(this.config.selector,'__section">').concat(this.timer,'</div>\n                <div class="').concat(this.config.selector,'__footer">\n                    <div class="').concat(this.config.selector,'__helper-text">').concat(this.data.footerText,'</div>\n                </div>\n            </div>\n            <div class="').concat(this.config.selector,'__minimize"></div>\n        </div>')}},{key:"insert",value:function(){document.body.insertAdjacentHTML("beforeend",this.style+this.template)}}])&&o(e.prototype,n),t}();function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e}var e,i;return e=t,(i=[{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:365;e=24*e*60*60*1e3;var i=new Date;i.setTime(i.getTime()+e);var n="expires="+i.toUTCString();document.cookie="".concat(this.name,"=").concat(t,";").concat(n,";path=/")}},{key:"get",value:function(){var t=document.cookie.match(new RegExp("(?:^|; )"+this.name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return!!t&&decodeURIComponent(t[1])}},{key:"clear",value:function(){this.set("",-1)}},{key:"check",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:365;""===this.get()&&this.set(t,e)}}])&&a(e.prototype,i),t}();function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e,this.config=i,this.cookieView=new l(this.config.cookieViewName),this.cookieEvent=new l(this.config.cookieEventName)}var e,i;return e=t,(i=[{key:"setViewShow",value:function(){this.cookieView.set("show",this.data.memoryDays)}},{key:"setViewMinimize",value:function(){this.cookieView.set("minimize",this.data.memoryDays)}},{key:"setViewClose",value:function(){this.cookieView.set("close",this.data.memoryCloseDays)}},{key:"setEventLoad",value:function(){this.cookieEvent.set("load",this.data.memoryDays)}},{key:"setEventTimer",value:function(){this.cookieEvent.set("timer",this.data.memoryDays)}},{key:"setEventCode",value:function(){this.cookieEvent.set("code",this.data.memoryDays)}},{key:"getView",value:function(){return this.cookieView.get()}},{key:"getEvent",value:function(){return this.cookieEvent.get()}}])&&r(e.prototype,i),t}();function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e,this.events=i,this.browserParams=n,this.config=this.events.config,this.$closeSelector=document.querySelector(".".concat(this.config.selector,"__close")),this.$minimizeSelector=document.querySelector(".".concat(this.config.selector,"__minimize"))}var e,i;return e=t,(i=[{key:"onLoad",value:function(){switch(this.events.status.getView()){case"minimize":this.events.minimize();break;default:this.events.show()}return this}},{key:"timerLoad",value:function(){var t=this,e=this.browserParams.touch?this.data.mobileLoadSec:this.data.desktopLoadSec;return this.timer=window.setTimeout((function(){t.events.show()}),1e3*parseInt(e)),this}},{key:"mouseTopOut",value:function(){var t=this;return document.body.addEventListener("mouseout",(function e(i){i.clientY<=0&&(t.events.show(),document.body.removeEventListener("mouseout",e),clearTimeout(this.timer))})),this}},{key:"minimize",value:function(){var t=this;return t.$minimizeSelector.addEventListener("click",(function(e){t.events.minimize()})),this}},{key:"close",value:function(){var t=this;return t.$closeSelector.addEventListener("click",(function(e){t.events.close()})),this}}])&&h(e.prototype,i),t}();function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;m(this,t),this.slug="digital-countdown-timer",this.isRun=!1,this.isEnd=!1,this.callback=i,this.seconds=0,this.time=parseInt(e.replace(":"))>5959||void 0===e?"00:59":e,this.ids=this.setIds(),this.default()}var e,i;return e=t,(i=[{key:"setIds",value:function(){return{minutes:{current:parseInt(this.time[0]),max:6,active:null},minute:{current:parseInt(this.time[1]),max:10,active:null},seconds:{current:parseInt(this.time[3]),max:6,active:null},second:{current:parseInt(this.time[4]),max:10,active:null}}}},{key:"default",value:function(){for(var t in this.ids){var e=this.ids[t].max-this.ids[t].current,i=document.querySelector(".".concat(this.slug,"__flip--").concat(t," .").concat(this.slug,"__digit:nth-child(").concat(e,")"));this.setActive(i)}return this.setActiveNumber(),this}},{key:"setActiveNumber",value:function(){for(var t in this.ids)this.ids[t].active=parseInt(document.querySelector(".".concat(this.slug,"__flip--").concat(t," .").concat(this.slug,"__digit--active .").concat(this.slug,"__inn--up")).innerHTML)}},{key:"end",value:function(){return this.isEnd}},{key:"run",value:function(){return this.isRun}},{key:"start",value:function(){var t=this;return this.isRun||this.isEnd||(this.isRun=!0,this.interval=setInterval((function(){t.setActiveNumber(),t.play("second"),t.seconds++,0===t.ids.second.active&&(t.play("seconds"),0===t.ids.seconds.active&&(t.play("minute"),0===t.ids.minute.active&&t.play("minutes")))}),1e3),this.setPlay(document.querySelector(".".concat(this.slug)))),this}},{key:"stop",value:function(){return clearInterval(this.interval),this.isRun=!1,this}},{key:"play",value:function(t){var e,i=document.querySelector(".".concat(this.slug,"__flip--").concat(t," .").concat(this.slug,"__digit--active"));"second"===t&&this.checkTime(),this.isEnd||(null===i?e=(i=document.querySelector(".".concat(this.slug,"__flip--").concat(t," .").concat(this.slug,"__digit"))).nextElementSibling:null===i.nextSibling?(this.removeBefore(t),e=document.querySelector(".".concat(this.slug,"__flip--").concat(t," .").concat(this.slug,"__digit"))):(this.removeBefore(t),e=i.nextElementSibling),this.setBefore(i),this.setActive(e))}},{key:"checkTime",value:function(){var t=!0;for(var e in this.ids)if(null===this.ids[e].active||0!==this.ids[e].active){t=!1;break}t&&(this.stop(),this.isEnd=!0,null!==this.callback&&void 0!==this.callback&&this.callback())}},{key:"removeBefore",value:function(t){var e=document.querySelector(".".concat(this.slug,"__flip--").concat(t," .").concat(this.slug,"__digit--before"));null!==e&&e.classList.remove("".concat(this.slug,"__digit--before"))}},{key:"setBefore",value:function(t){t.classList.add("".concat(this.slug,"__digit--before")),t.classList.remove("".concat(this.slug,"__digit--active"))}},{key:"setActive",value:function(t){t.classList.add("".concat(this.slug,"__digit--active"))}},{key:"setPlay",value:function(t){t.closest(".".concat(this.slug)).classList.add("".concat(this.slug,"--play"))}}])&&v(e.prototype,i),t}();function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var p=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.$selector=document.querySelector(".".concat(this.config.selector)),this.timer=i,this.status=n}var e,i;return e=t,(i=[{key:"show",value:function(){this.$selector.classList.add("".concat(this.config.selector,"--show")),this.$selector.classList.remove("".concat(this.config.selector,"--minimize")),this.status.setViewShow(),!1!==this.timer&&!0!==this.timer.end&&(this.timer.start(),this.status.setEventTimer())}},{key:"close",value:function(){this.$selector.classList.remove("".concat(this.config.selector,"--show")),this.status.setViewClose(),this.status.setEventLoad(),!1!==this.timer&&!0!==this.timer.end&&this.timer.stop()}},{key:"minimize",value:function(){this.$selector.classList.contains("".concat(this.config.selector,"--minimize"))?this.show():(this.$selector.classList.add("".concat(this.config.selector,"--show")),this.$selector.classList.add("".concat(this.config.selector,"--minimize")),this.status.setViewMinimize(),!1!==this.timer&&!0!==this.timer.end&&this.timer.stop())}}])&&g(e.prototype,i),t}();function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),"undefined"!=typeof dataExitPopup&&(this._setDataObject(dataExitPopup)._setConfig()._setBrowserParams()._setStatusObject(),"close"!==this.status.getView()&&this._setViewObject()._onLoad())}var i,n;return i=e,(n=[{key:"_setDataObject",value:function(t){return this.data=t,this}},{key:"_setConfig",value:function(){return this.config=t,this}},{key:"_setBrowserParams",value:function(){return this.browserParams={mac:-1!==navigator.appVersion.indexOf("Mac"),touch:"ontouchstart"in window||"onmsgesturechange"in window},this}},{key:"_setStatusObject",value:function(){return this.status=new u(this.data,this.config),this}},{key:"_setViewObject",value:function(){return this.view=new c(this.data,this.config,this.browserParams),this}},{key:"_onLoad",value:function(){"code"===this.status.getEvent()?(this.events=new p(this.config,!1,this.status),this._setSection(this.view.getTemplateCode()),this.Listeners=new d(this.data,this.events,this.browserParams),this.Listeners.onLoad().minimize().close()):("timer"!==this.status.getEvent()&&this.status.setEventLoad(),this._setSection(this.view.getTemplateTimer()),this.events=new p(this.config,this._setTimer(),this.status),this.Listeners=new d(this.data,this.events,this.browserParams),"timer"!==this.status.getEvent()?this.Listeners.timerLoad().mouseTopOut():this.Listeners.onLoad(),this.Listeners.minimize().close())}},{key:"_setSection",value:function(t){document.querySelector(".".concat(this.config.selector,"__section")).innerHTML=t}},{key:"_setTimer",value:function(){var t=this;return new f(this.data.time,(function(){t._setSection(t.view.getTemplateCode()),t.status.setEventCode()}))}}])&&y(i.prototype,n),e}();document.addEventListener("DOMContentLoaded",(function(){new _}))})();